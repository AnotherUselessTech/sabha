(this.webpackJsonpsabha=this.webpackJsonpsabha||[]).push([[0],{112:function(e,t){},115:function(e,t,a){},116:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(7),i=a.n(c),o=(a(80),a(5)),r=a(50),m=a(136),s=a(154),u=a(153),d=a(151),g=a(152),E=a(155),f=a(156),v=a(138),h=a(139),b=a(140),p=a(141),y=a(142),O=a(143),j=a(144),S=a(145),x=a(146),w=a(147),C=a(148),N=a(149),k=a(150),I={width:"30%",lineHeight:2.5,borderRadius:"4px",border:"1px solid green",padding:"5px",backgroundColor:"#dcf4d1",marginLeft:"10px"},T={backgroundColor:"deepskyblue",lineHeight:2.5,fontSize:"medium",borderRadius:"4px",width:"30%",marginTop:"30px"},R={display:"flex",margin:"10%",marginLeft:"30%",width:"50%",flexDirection:"column",alignItems:"center"},D={width:"100%",display:"flex",margin:"10px",alignItems:"center",flex:1},P={width:"100%",flex:1,display:"flex",alignItems:"flex-end"},_={},B={position:"relative",bottom:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",opacity:"1"},L=Object(r.a)(Object(r.a)({},B),{},{opacity:0,transition:"opacity 1s ease-in-out"});function H(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],i=a[1],r=Object(n.useState)(""),H=Object(o.a)(r,2),F=H[0],M=H[1],A=Object(n.useState)("Fellow Jitser"),U=Object(o.a)(A,2),J=U[0],K=U[1],W=Object(n.useState)(),V=Object(o.a)(W,2),z=V[0],q=V[1],Y=Object(n.useState)(!0),G=Object(o.a)(Y,2),Q=G[0],X=G[1],Z=Object(n.useState)(!0),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(o.a)(ae,2),le=ne[0],ce=ne[1],ie=Object(n.useState)(!1),oe=Object(o.a)(ie,2),re=oe[0],me=oe[1],se=Object(n.useState)(!1),ue=Object(o.a)(se,2),de=ue[0],ge=ue[1],Ee=Object(n.useState)(null),fe=Object(o.a)(Ee,2),ve=(fe[0],fe[1],Object(n.useState)(!1)),he=Object(o.a)(ve,2),be=he[0],pe=he[1],ye=Object(n.useState)("Full Screen"),Oe=Object(o.a)(ye,2),je=Oe[0],Se=Oe[1],xe=l.a.useRef(null),we=l.a.useRef(be),Ce={roomName:F,height:"40em",parentNode:"",userInfo:{displayName:J},onload:function(){console.log("After load of iframe"),document.getElementById(e.divId).children[0].style["pointer-events"]="none"},interfaceConfigOverwrite:{TOOLBAR_BUTTONS:[]}};Object(n.useEffect)((function(){if(c&&F&&!z){console.log("************************\n"+document.getElementById(e.divId));var t=window.JitsiMeetExternalAPI;i(!0),Ce.parentNode=document.getElementById(e.divId),console.log(window.JitsiMeetExternalAPI);var a=new t("meet.jit.si",Ce);a.addEventListener("screenSharingStatusChanged",(function(e){console.log(e),ce(!le)})),a.executeCommand("toggleFilmStrip"),q(a)}}),[c,Ce,e.divId,F,z]),Object(n.useEffect)((function(){de&&setTimeout((function(){ge(!1)}),3e3)})),Object(n.useEffect)((function(){window.innerHeight!==screen.height&&z&&(document.getElementById(e.divId).children[0].style.height="40em",Se("Full Screen"))}),[window.innerHeight!==screen.height]),l.a.useEffect((function(){!0===we.current&&!1===be&&xe.current.focus(),we.current=be}),[be]);var Ne=function(){pe((function(e){return!e}))},ke=function(){xe.current&&xe.current.contains(event.target)||pe(!1)},Ie=function(){"Full Screen"===je?(document.getElementById("meetingParent").webkitRequestFullscreen(),document.getElementById(e.divId).children[0].style.height="54em",Se("Exit Full Screen"),pe(!1)):document.webkitExitFullscreen()};return l.a.createElement("div",null,c?l.a.createElement("div",{id:"meetingParent",style:{position:"relative"}},l.a.createElement("div",{style:_,id:"meet",onMouseMove:function(e){ge(!0)}}),l.a.createElement("div",{style:de?B:L},l.a.createElement("div",{style:{marginLeft:"10px"}},l.a.createElement(m.a,{onClick:function(){z.executeCommand("toggleChat")}},l.a.createElement(v.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){z.executeCommand("")}},l.a.createElement(h.a,{style:{color:"white"}}))),l.a.createElement("div",null,l.a.createElement(m.a,{onClick:function(){X(!Q),z.executeCommand("toggleAudio")}},Q?l.a.createElement(b.a,{style:{color:"white"}}):l.a.createElement(p.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){te(!ee),z.executeCommand("toggleVideo")}},ee?l.a.createElement(y.a,{style:{color:"white"}}):l.a.createElement(O.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){ce(!le),z.executeCommand("toggleShareScreen")}},le?l.a.createElement(S.a,{style:{color:"white"}}):l.a.createElement(j.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){z.executeCommand("hangup"),z.dispose(),i(!1),q(null)}},l.a.createElement(x.a,{style:{color:"red"}}))),l.a.createElement("div",{style:{marginRight:"10px"}},l.a.createElement(m.a,{onClick:function(){me(!re),z.executeCommand("toggleTileView")}},re?l.a.createElement(w.a,{style:{color:"white"}}):l.a.createElement(C.a,{style:{color:"white"}})),l.a.createElement(m.a,null,l.a.createElement(N.a,{onClick:function(){z.executeCommand("toggleFilmStrip")},style:{color:"white"}})),l.a.createElement(n.Fragment,null,l.a.createElement(m.a,{ref:xe,"aria-controls":be?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:Ne},l.a.createElement(k.a,{style:{color:"white"}})),l.a.createElement(s.a,{open:be,anchorEl:xe.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return l.a.createElement(u.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),l.a.createElement(d.a,null,l.a.createElement(g.a,{onClickAway:ke},l.a.createElement(E.a,{autoFocusItem:be,id:"menu-list-grow"},l.a.createElement(f.a,{onClick:Ie},je),l.a.createElement(f.a,{onClick:function(){z.executeCommand("muteEveryone")}},"Mute Everyone")))))})))))):l.a.createElement("div",{style:{height:"30em"}},l.a.createElement("div",{style:R},l.a.createElement("div",{style:D},l.a.createElement("span",null,"Room Name"),l.a.createElement("input",{style:I,onChange:function(e){M(e.target.value)}})),l.a.createElement("div",{style:D},l.a.createElement("span",null,"User Name \xa0"),l.a.createElement("input",{style:I,onChange:function(e){K(e.target.value)}})),l.a.createElement("div",{style:P},l.a.createElement("button",{style:T,onClick:function(){i(!0)}},"Join Room")))))}var F=a(22),M=a.n(F),A=(a(115),{width:"30%",lineHeight:2.5,borderRadius:"4px",border:"1px solid green",padding:"5px",backgroundColor:"#dcf4d1",marginLeft:"10px"}),U={backgroundColor:"lightgreen",lineHeight:2.5,fontSize:"medium",borderRadius:"4px",width:"30%",marginTop:"30px"},J={display:"flex",margin:"10%",marginLeft:"30%",width:"50%",flexDirection:"column",alignItems:"center"},K={width:"100%",display:"flex",margin:"10px",alignItems:"center",flex:1},W={width:"100%",flex:1,display:"flex",alignItems:"flex-end"},V=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),r=Object(o.a)(i,2),m=r[0],s=r[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),g=d[0],E=d[1],f=Object(n.useState)(""),v=Object(o.a)(f,2),h=v[0],b=v[1],p=Object(n.useState)({}),y=Object(o.a)(p,2),O=(y[0],y[1],Object(n.useState)({})),j=Object(o.a)(O,2),S=(j[0],j[1],Object(n.useState)({chatsData:[]})),x=Object(o.a)(S,2),w=x[0],C=x[1];Object(n.useEffect)((function(){if(g){console.log("In effect, without socket!");var e=M()();e.emit("initialize",{roomName:m}),e.on("otherschatreplies",(function(e){console.log("Trying not to look"),console.log(e.dontlook);N(e.chatsData);C(e)}))}}),[g]);var N=function(e){return e.sort((function(e,t){return e.time-t.time}))},k=function(e){var t=new Date(Number(e));return"".concat(t.getHours(),":").concat(t.getMinutes())};return l.a.createElement("div",{style:{height:"35em"}},g?(console.log("Rerendering chat view..."),console.log(w),console.log(a,m),l.a.createElement("div",null,l.a.createElement("div",{className:"msger"},l.a.createElement("header",{className:"msger-header"},l.a.createElement("div",{className:"msger-header-title"},l.a.createElement("i",{className:"fas fa-comment-alt"})," Sabha Chat Room - ",m),l.a.createElement("div",{className:"msger-header-options"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-cog"},a)))),l.a.createElement("div",{className:"msger-chat"},w.chatsData.map((function(e){return e.user!==a?l.a.createElement("div",{className:"msg left-msg"},l.a.createElement("div",{className:"msg-img",style:{backgroundImage:"url(https://image.flaticon.com/icons/svg/327/327779.svg)"}}),l.a.createElement("div",{className:"msg-bubble"},l.a.createElement("div",{className:"msg-info"},l.a.createElement("div",{className:"msg-info-name"},e.user),l.a.createElement("div",{className:"msg-info-time"},k(e.time))),l.a.createElement("div",{className:"msg-text"},e.message))):l.a.createElement("div",{className:"msg right-msg"},l.a.createElement("div",{className:"msg-img",style:{backgroundImage:"url(https://image.flaticon.com/icons/svg/145/145867.svg)"}}),l.a.createElement("div",{className:"msg-bubble"},l.a.createElement("div",{className:"msg-info"},l.a.createElement("div",{className:"msg-info-name"},e.user),l.a.createElement("div",{className:"msg-info-time"},k(e.time))),l.a.createElement("div",{className:"msg-text"},e.message)))}))),l.a.createElement("form",{className:"msger-inputarea",onSubmit:function(e){e.preventDefault(),M()().emit("captureChat",{username:a,roomName:m,message:{time:(new Date).getTime(),text:h}}),w.chatsData.push({user:a,message:h,time:(new Date).getTime()}),C(w),b("")}},l.a.createElement("input",{type:"text",value:h,onChange:function(e){b(e.target.value)},className:"msger-input",placeholder:"Enter your message..."}),l.a.createElement("button",{type:"submit",className:"msger-send-btn"},"Send"))))):l.a.createElement("div",{style:J},l.a.createElement("div",{style:K},l.a.createElement("span",null,"Room Name"),l.a.createElement("input",{style:A,key:"roomname",onChange:function(e){s(e.target.value)}})),l.a.createElement("div",{style:K},l.a.createElement("span",null,"User Name \xa0"),l.a.createElement("input",{style:A,key:"username",onChange:function(e){c(e.target.value)}})),l.a.createElement("div",{style:W},l.a.createElement("button",{style:U,onClick:function(){E(!0),M()().emit("joined",{roomName:m,username:a})}},"Join Chat Room"))))},z={display:"flex",justifyContent:"space-around"},q={display:"flex",flexDirection:"column",alignItems:"center",width:"80%",height:"80%"},Y=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){var e=document.getElementById("local-video");console.log("Local video: "+e),console.log("Streamed video is: "+c),console.log("Server: "+function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT;return""}()),console.log("Publi URL: "),console.log("Port: "+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT);var t=M()();navigator.getUserMedia({video:!0,audio:!0},(function(a){e&&(e.srcObject=a,console.log(a),t.emit("streaming",{id:"local-video",audio:a.getTracks()[0].id,video:a.getTracks()[1].id}),!c&&i("bla"))}),(function(e){console.warn(e.message)}))}),[c]),Object(n.useEffect)((function(){"bla"===c&&M()().on("listening",(function(e){if(console.log(e),e.id){var t=new window.MediaStream,a=document.getElementById(e.id).srcObject.getTracks();t.addTrack(a[0]),t.addTrack(a[1]),document.getElementById("streamed-video").srcObject=t,i("ad")}}))})),l.a.createElement("div",{style:{height:"35em"}},l.a.createElement("div",{className:"content-container"},l.a.createElement("div",{className:"video-chat-container"},l.a.createElement("div",{className:"video-container",style:z},l.a.createElement("div",{style:q},l.a.createElement("h3",null,"Me"),l.a.createElement("video",{autoPlay:!0,muted:!0,className:"local-video",id:"local-video"})),l.a.createElement("div",{style:q},l.a.createElement("h3",null,"You"),l.a.createElement("video",{autoPlay:!0,muted:!0,className:"streamed-video",id:"streamed-video"},c))))))},G=a(32),Q=a(19);a(116);var X=function(){return l.a.createElement(G.a,null,l.a.createElement("div",null,l.a.createElement("nav",null,l.a.createElement("div",{className:"navbar"},l.a.createElement("h3",null,"SABHA"),l.a.createElement(G.b,{to:"/"},"Jitsi"),l.a.createElement(G.b,{to:"/chat"},"Chat"),l.a.createElement(G.b,{to:"/meet"},"Meet"))),l.a.createElement(Q.c,null,l.a.createElement(Q.a,{path:"/chat"},l.a.createElement(V,null)),l.a.createElement(Q.a,{path:"/meet"},l.a.createElement("div",{id:"meet2"}),l.a.createElement(Y,null)),l.a.createElement(Q.a,{path:"/"},l.a.createElement(H,{divId:"meet"})))))};i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(X,null)),document.getElementById("rootdiv"))},75:function(e,t,a){e.exports=a(118)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.c6ddd130.chunk.js.map