(this.webpackJsonpsabha=this.webpackJsonpsabha||[]).push([[0],{102:function(e,t,a){e.exports=a(147)},107:function(e,t,a){},141:function(e,t){},144:function(e,t,a){},145:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(9),i=a.n(c),o=(a(107),a(8)),r=a(67),m=a(198),s=a(212),u=a(195),d=a(189),g=a(213),E=a(218),v=a(219),f=a(199),b=a(200),p=a(201),h=a(202),y=a(203),O=a(204),j=a(205),C=a(206),x=a(207),S=a(208),w=a(209),N=a(210),I=a(211),k=a(186),T=a(197),D=a(216),R=a(196),P=a(192),B=a(149),_=a(191),A=a(217),L=a(194),M=a(193),F=a(214),H=a(91),U=a.n(H),J=Object(k.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120}}}));function W(e){var t=e.mics,a=e.speakers,n=e.cameras,c=e.jitsiApi,i=J(),r=l.a.useState(!1),m=Object(o.a)(r,2),s=m[0],u=m[1],d=l.a.useState(t[0]?t[0].label:"select one"),g=Object(o.a)(d,2),E=g[0],f=g[1],b=l.a.useState(a[0]?a[0].label:"select one"),p=Object(o.a)(b,2),h=p[0],y=p[1],O=l.a.useState(n[0]?n[0].label:"select one"),j=Object(o.a)(O,2),C=j[0],x=j[1],S=function(){u(!1)},w=function(t,a){for(var n in e[a])if(e[a][n].label===t)return console.log(e[a][n].deviceId),e[a][n].deviceId};return l.a.createElement("div",null,l.a.createElement("span",{onClick:function(){u(!0)}},"Settings"),l.a.createElement(D.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:s,onClose:S},l.a.createElement(_.a,null,"Device Manager"),l.a.createElement(P.a,null,l.a.createElement("form",{className:i.container,style:{display:"flex",flexDirection:"column"},id:"devicesMenu"},l.a.createElement(M.a,{className:i.formControl},l.a.createElement(A.a,{htmlFor:"demo-dialog-native"},"Microphone"),l.a.createElement(F.a,{value:E,onChange:function(e){f(e.target.value),c.setAudioInputDevice(e.target.value,w(e.target.value,"mics"))},input:l.a.createElement(L.a,{id:"demo-dialog-native"})},t.map((function(e){return l.a.createElement(v.a,{name:e.deviceId,value:e.label,id:e.deviceId},e.label)})))),l.a.createElement(M.a,{className:i.formControl},l.a.createElement(A.a,{id:"demo-dialog-select-label"},"Speaker"),l.a.createElement(F.a,{labelId:"demo-dialog-select-label",id:"demo-dialog-select",value:h,onChange:function(e){y(e.target.value),c.setAudioOutputDevice(e.target.value,w(e.target.value,"speakers"))},input:l.a.createElement(L.a,null)},a.map((function(e){return l.a.createElement(v.a,{name:e.deviceId,value:e.label,id:e.deviceId},e.label)})))),l.a.createElement(M.a,{className:i.formControl},l.a.createElement(A.a,{id:"demo-dialog-select-label2"},"Camera"),l.a.createElement(F.a,{labelId:"demo-dialog-select-labele",id:"demo-dialog-selecte",value:C,onChange:function(e){x(e.target.value),c.setVideoInputDevice(e.target.value,w(e.target.value,"cameras"))},input:l.a.createElement(L.a,null)},n.map((function(e){return l.a.createElement(v.a,{name:e.deviceId,value:e.label,id:e.deviceId},e.label)}))))),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"10px",marginLeft:"7px"}},l.a.createElement(B.a,{className:i.pos},"Play a test sound"),l.a.createElement(U.a,{style:{marginLeft:"8px"},onClick:function(){var e=new Audio("/gonnadie.wav");console.log(e),e.play()}}),l.a.createElement("audio",{id:"jarjar",src:"./gonnadie.wav"}))),l.a.createElement(R.a,null,l.a.createElement(T.a,{onClick:S,color:"primary"},"Ok"))))}var K={width:"30%",lineHeight:2.5,borderRadius:"4px",border:"1px solid green",padding:"5px",backgroundColor:"#dcf4d1",marginLeft:"10px"},V={backgroundColor:"deepskyblue",lineHeight:2.5,fontSize:"medium",borderRadius:"4px",width:"30%",marginTop:"30px"},z={display:"flex",margin:"10%",marginLeft:"30%",width:"50%",flexDirection:"column",alignItems:"center"},q={width:"100%",display:"flex",margin:"10px",alignItems:"center",flex:1},Y={width:"100%",flex:1,display:"flex",alignItems:"flex-end"},G={},Q={position:"relative",bottom:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",opacity:"1"},X=Object(r.a)(Object(r.a)({},Q),{},{opacity:0,transition:"opacity 1s ease-in-out"});function Z(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],i=a[1],r=Object(n.useState)(""),k=Object(o.a)(r,2),T=k[0],D=k[1],R=Object(n.useState)("Fellow Jitser"),P=Object(o.a)(R,2),B=P[0],_=P[1],A=Object(n.useState)(),L=Object(o.a)(A,2),M=L[0],F=L[1],H=Object(n.useState)(!0),U=Object(o.a)(H,2),J=U[0],Z=U[1],$=Object(n.useState)(!0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),le=Object(o.a)(ne,2),ce=le[0],ie=le[1],oe=Object(n.useState)(!1),re=Object(o.a)(oe,2),me=re[0],se=re[1],ue=Object(n.useState)(!1),de=Object(o.a)(ue,2),ge=de[0],Ee=de[1],ve=Object(n.useState)(null),fe=Object(o.a)(ve,2),be=(fe[0],fe[1],Object(n.useState)(!1)),pe=Object(o.a)(be,2),he=pe[0],ye=pe[1],Oe=Object(n.useState)("Full Screen"),je=Object(o.a)(Oe,2),Ce=je[0],xe=je[1],Se=Object(n.useState)({mics:[],cameras:[],speakers:[]}),we=Object(o.a)(Se,2),Ne=we[0],Ie=we[1],ke=l.a.useRef(null),Te=l.a.useRef(he),De={roomName:T,height:"40em",parentNode:"",userInfo:{displayName:B},onload:function(){console.log("After load of iframe"),document.getElementById(e.divId).children[0].style["pointer-events"]="none"},interfaceConfigOverwrite:{TOOLBAR_BUTTONS:[]}};Object(n.useEffect)((function(){if(c&&T&&!M){console.log("************************\n"+document.getElementById(e.divId));var t=window.JitsiMeetExternalAPI;i(!0),De.parentNode=document.getElementById(e.divId),console.log(window.JitsiMeetExternalAPI);var a=new t("meet.jit.si",De);a.addEventListener("screenSharingStatusChanged",(function(e){console.log(e),ie(!ce)})),a.executeCommand("toggleFilmStrip"),a.getAvailableDevices().then((function(e){console.log("######################",e);var t={mics:e.audioInput,speakers:e.audioOutput,cameras:e.videoInput};Ie(t)})),F(a)}}),[c,De,e.divId,T,M]),Object(n.useEffect)((function(){ge&&setTimeout((function(){Ee(!1)}),3e3)})),Object(n.useEffect)((function(){window.innerHeight!==screen.height&&M&&(document.getElementById(e.divId).children[0].style.height="40em",xe("Full Screen"))}),[window.innerHeight!==screen.height]),l.a.useEffect((function(){!0===Te.current&&!1===he&&ke.current.focus(),Te.current=he}),[he]);var Re=function(){ye((function(e){return!e}))},Pe=function(){var e=document.getElementById("devicesMenu");console.log("&&&&&&&&&&&&&&&&&&&&&&&&",e),ke.current&&(ke.current.contains(event.target)||e)?console.log("doin nuthin"):(console.log("Closing the shit"),ye(!1))},Be=function(){"Full Screen"===Ce?(document.getElementById("meetingParent").webkitRequestFullscreen(),document.getElementById(e.divId).children[0].style.height="54em",xe("Exit Full Screen"),ye(!1)):document.webkitExitFullscreen()};return l.a.createElement("div",null,c?l.a.createElement("div",{id:"meetingParent",style:{position:"relative"}},l.a.createElement("div",{style:G,id:"meet",onMouseMove:function(e){Ee(!0)}}),l.a.createElement("div",{style:ge?Q:X},l.a.createElement("div",{style:{marginLeft:"10px"}},l.a.createElement(m.a,{onClick:function(){M.executeCommand("toggleChat")}},l.a.createElement(f.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){M.executeCommand("")}},l.a.createElement(b.a,{style:{color:"white"}}))),l.a.createElement("div",null,l.a.createElement(m.a,{onClick:function(){Z(!J),M.executeCommand("toggleAudio")}},J?l.a.createElement(p.a,{style:{color:"white"}}):l.a.createElement(h.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){ae(!te),M.executeCommand("toggleVideo")}},te?l.a.createElement(y.a,{style:{color:"white"}}):l.a.createElement(O.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){ie(!ce),M.executeCommand("toggleShareScreen")}},ce?l.a.createElement(C.a,{style:{color:"white"}}):l.a.createElement(j.a,{style:{color:"white"}})),l.a.createElement(m.a,{onClick:function(){M.executeCommand("hangup"),M.dispose(),i(!1),F(null)}},l.a.createElement(x.a,{style:{color:"red"}}))),l.a.createElement("div",{style:{marginRight:"10px"}},l.a.createElement(m.a,{onClick:function(){se(!me),M.executeCommand("toggleTileView")}},me?l.a.createElement(S.a,{style:{color:"white"}}):l.a.createElement(w.a,{style:{color:"white"}})),l.a.createElement(m.a,null,l.a.createElement(N.a,{onClick:function(){M.executeCommand("toggleFilmStrip")},style:{color:"white"}})),l.a.createElement(n.Fragment,null,l.a.createElement(m.a,{ref:ke,"aria-controls":he?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:Re},l.a.createElement(I.a,{style:{color:"white"}})),l.a.createElement(s.a,{open:he,anchorEl:ke.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return l.a.createElement(u.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),l.a.createElement(d.a,null,l.a.createElement(g.a,{onClickAway:Pe},l.a.createElement(E.a,{autoFocusItem:he,id:"menu-list-grow"},l.a.createElement(v.a,{onClick:Be},Ce),l.a.createElement(v.a,{onClick:function(){M.executeCommand("muteEveryone")}},"Mute Everyone"),l.a.createElement(v.a,null,l.a.createElement(W,Object.assign({},Ne,{jitsiApi:M})))))))})))))):l.a.createElement("div",{style:{height:"30em"}},l.a.createElement("div",{style:z},l.a.createElement("div",{style:q},l.a.createElement("span",null,"Room Name"),l.a.createElement("input",{style:K,onChange:function(e){D(e.target.value)}})),l.a.createElement("div",{style:q},l.a.createElement("span",null,"User Name \xa0"),l.a.createElement("input",{style:K,onChange:function(e){_(e.target.value)}})),l.a.createElement("div",{style:Y},l.a.createElement("button",{style:V,onClick:function(){i(!0)}},"Join Room")))))}var $=a(35),ee=a.n($),te=(a(144),{width:"30%",lineHeight:2.5,borderRadius:"4px",border:"1px solid green",padding:"5px",backgroundColor:"#dcf4d1",marginLeft:"10px"}),ae={backgroundColor:"lightgreen",lineHeight:2.5,fontSize:"medium",borderRadius:"4px",width:"30%",marginTop:"30px"},ne={display:"flex",margin:"10%",marginLeft:"30%",width:"50%",flexDirection:"column",alignItems:"center"},le={width:"100%",display:"flex",margin:"10px",alignItems:"center",flex:1},ce={width:"100%",flex:1,display:"flex",alignItems:"flex-end"},ie=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),r=Object(o.a)(i,2),m=r[0],s=r[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),g=d[0],E=d[1],v=Object(n.useState)(""),f=Object(o.a)(v,2),b=f[0],p=f[1],h=Object(n.useState)({}),y=Object(o.a)(h,2),O=(y[0],y[1],Object(n.useState)({})),j=Object(o.a)(O,2),C=(j[0],j[1],Object(n.useState)({chatsData:[]})),x=Object(o.a)(C,2),S=x[0],w=x[1];Object(n.useEffect)((function(){if(g){console.log("In effect, without socket!");var e=ee()();e.emit("initialize",{roomName:m}),e.on("otherschatreplies",(function(e){console.log("Trying not to look"),console.log(e.dontlook);N(e.chatsData);w(e)}))}}),[g]);var N=function(e){return e.sort((function(e,t){return e.time-t.time}))},I=function(e){var t=new Date(Number(e));return"".concat(t.getHours(),":").concat(t.getMinutes())};return l.a.createElement("div",{style:{height:"35em"}},g?(console.log("Rerendering chat view..."),console.log(S),console.log(a,m),l.a.createElement("div",null,l.a.createElement("div",{className:"msger"},l.a.createElement("header",{className:"msger-header"},l.a.createElement("div",{className:"msger-header-title"},l.a.createElement("i",{className:"fas fa-comment-alt"})," Sabha Chat Room - ",m),l.a.createElement("div",{className:"msger-header-options"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-cog"},a)))),l.a.createElement("div",{className:"msger-chat"},S.chatsData.map((function(e){return e.user!==a?l.a.createElement("div",{className:"msg left-msg"},l.a.createElement("div",{className:"msg-img",style:{backgroundImage:"url(https://image.flaticon.com/icons/svg/327/327779.svg)"}}),l.a.createElement("div",{className:"msg-bubble"},l.a.createElement("div",{className:"msg-info"},l.a.createElement("div",{className:"msg-info-name"},e.user),l.a.createElement("div",{className:"msg-info-time"},I(e.time))),l.a.createElement("div",{className:"msg-text"},e.message))):l.a.createElement("div",{className:"msg right-msg"},l.a.createElement("div",{className:"msg-img",style:{backgroundImage:"url(https://image.flaticon.com/icons/svg/145/145867.svg)"}}),l.a.createElement("div",{className:"msg-bubble"},l.a.createElement("div",{className:"msg-info"},l.a.createElement("div",{className:"msg-info-name"},e.user),l.a.createElement("div",{className:"msg-info-time"},I(e.time))),l.a.createElement("div",{className:"msg-text"},e.message)))}))),l.a.createElement("form",{className:"msger-inputarea",onSubmit:function(e){e.preventDefault(),ee()().emit("captureChat",{username:a,roomName:m,message:{time:(new Date).getTime(),text:b}}),S.chatsData.push({user:a,message:b,time:(new Date).getTime()}),w(S),p("")}},l.a.createElement("input",{type:"text",value:b,onChange:function(e){p(e.target.value)},className:"msger-input",placeholder:"Enter your message..."}),l.a.createElement("button",{type:"submit",className:"msger-send-btn"},"Send"))))):l.a.createElement("div",{style:ne},l.a.createElement("div",{style:le},l.a.createElement("span",null,"Room Name"),l.a.createElement("input",{style:te,key:"roomname",onChange:function(e){s(e.target.value)}})),l.a.createElement("div",{style:le},l.a.createElement("span",null,"User Name \xa0"),l.a.createElement("input",{style:te,key:"username",onChange:function(e){c(e.target.value)}})),l.a.createElement("div",{style:ce},l.a.createElement("button",{style:ae,onClick:function(){E(!0),ee()().emit("joined",{roomName:m,username:a})}},"Join Chat Room"))))},oe={display:"flex",justifyContent:"space-around"},re={display:"flex",flexDirection:"column",alignItems:"center",width:"80%",height:"80%"},me=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){var e=document.getElementById("local-video");console.log("Local video: "+e),console.log("Streamed video is: "+c),console.log("Server: "+function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT;return""}()),console.log("Publi URL: "),console.log("Port: "+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT);var t=ee()();navigator.getUserMedia({video:!0,audio:!0},(function(a){e&&(e.srcObject=a,console.log(a),t.emit("streaming",{id:"local-video",audio:a.getTracks()[0].id,video:a.getTracks()[1].id}),!c&&i("bla"))}),(function(e){console.warn(e.message)}))}),[c]),Object(n.useEffect)((function(){"bla"===c&&ee()().on("listening",(function(e){if(console.log(e),e.id){var t=new window.MediaStream,a=document.getElementById(e.id).srcObject.getTracks();t.addTrack(a[0]),t.addTrack(a[1]),document.getElementById("streamed-video").srcObject=t,i("ad")}}))})),l.a.createElement("div",{style:{height:"35em"}},l.a.createElement("div",{className:"content-container"},l.a.createElement("div",{className:"video-chat-container"},l.a.createElement("div",{className:"video-container",style:oe},l.a.createElement("div",{style:re},l.a.createElement("h3",null,"Me"),l.a.createElement("video",{autoPlay:!0,muted:!0,className:"local-video",id:"local-video"})),l.a.createElement("div",{style:re},l.a.createElement("h3",null,"You"),l.a.createElement("video",{autoPlay:!0,muted:!0,className:"streamed-video",id:"streamed-video"},c))))))},se=a(46),ue=a(30);a(145);var de=function(){return l.a.createElement(se.a,null,l.a.createElement("div",null,l.a.createElement("nav",null,l.a.createElement("div",{className:"navbar"},l.a.createElement("h3",null,"SABHA"),l.a.createElement(se.b,{to:"/"},"Jitsi"),l.a.createElement(se.b,{to:"/chat"},"Chat"),l.a.createElement(se.b,{to:"/meet"},"Meet"))),l.a.createElement(ue.c,null,l.a.createElement(ue.a,{path:"/chat"},l.a.createElement(ie,null)),l.a.createElement(ue.a,{path:"/meet"},l.a.createElement("div",{id:"meet2"}),l.a.createElement(me,null)),l.a.createElement(ue.a,{path:"/"},l.a.createElement(Z,{divId:"meet"})))))};i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(de,null)),document.getElementById("rootdiv"))}},[[102,1,2]]]);
//# sourceMappingURL=main.da848c7e.chunk.js.map