(this.webpackJsonpsabha=this.webpackJsonpsabha||[]).push([[0],{108:function(e,t,a){e.exports=a(154)},113:function(e,t,a){},147:function(e,t){},150:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(10),r=a.n(c),o=(a(113),a(7)),i=a(69),s=a(202),m=a(216),u=a(199),d=a(193),g=a(217),f=a(223),E=a(224),v=a(203),p=a(204),b=a(205),h=a(206),y=a(207),O=a(208),w=a(209),x=a(210),j=a(211),S=a(212),C=a(213),k=a(214),I=a(215),N=a(190),T=a(201),D=a(221),R=a(200),P=a(196),B=a(156),L=a(195),M=a(222),A=a(198),_=a(197),F=a(219),H=a(93),U=a.n(H),J=Object(N.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120}}}));function W(e){var t=e.mics,a=e.speakers,n=e.cameras,c=e.jitsiApi,r=J(),i=l.a.useState(!1),s=Object(o.a)(i,2),m=s[0],u=s[1],d=l.a.useState(t[0]?t[0].label:"select one"),g=Object(o.a)(d,2),f=g[0],v=g[1],p=l.a.useState(a[0]?a[0].label:"select one"),b=Object(o.a)(p,2),h=b[0],y=b[1],O=l.a.useState(n[0]?n[0].label:"select one"),w=Object(o.a)(O,2),x=w[0],j=w[1],S=function(){u(!1)},C=function(t,a){for(var n in e[a])if(e[a][n].label===t)return console.log(e[a][n].deviceId),e[a][n].deviceId};return l.a.createElement("div",null,l.a.createElement("span",{onClick:function(){u(!0)}},"Settings"),l.a.createElement(D.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:m,onClose:S},l.a.createElement(L.a,null,"Device Manager"),l.a.createElement(P.a,null,l.a.createElement("form",{className:r.container,style:{display:"flex",flexDirection:"column"},id:"devicesMenu"},l.a.createElement(_.a,{className:r.formControl},l.a.createElement(M.a,{htmlFor:"demo-dialog-native"},"Microphone"),l.a.createElement(F.a,{value:f,onChange:function(e){v(e.target.value),c.setAudioInputDevice(e.target.value,C(e.target.value,"mics"))},input:l.a.createElement(A.a,{id:"demo-dialog-native"})},t.map((function(e){return l.a.createElement(E.a,{name:e.deviceId,value:e.label,id:e.deviceId},e.label)})))),l.a.createElement(_.a,{className:r.formControl},l.a.createElement(M.a,{id:"demo-dialog-select-label"},"Speaker"),l.a.createElement(F.a,{labelId:"demo-dialog-select-label",id:"demo-dialog-select",value:h,onChange:function(e){y(e.target.value),c.setAudioOutputDevice(e.target.value,C(e.target.value,"speakers"))},input:l.a.createElement(A.a,null)},a.map((function(e){return l.a.createElement(E.a,{name:e.deviceId,value:e.label,id:e.deviceId},e.label)})))),l.a.createElement(_.a,{className:r.formControl},l.a.createElement(M.a,{id:"demo-dialog-select-label2"},"Camera"),l.a.createElement(F.a,{labelId:"demo-dialog-select-labele",id:"demo-dialog-selecte",value:x,onChange:function(e){j(e.target.value),c.setVideoInputDevice(e.target.value,C(e.target.value,"cameras"))},input:l.a.createElement(A.a,null)},n.map((function(e){return l.a.createElement(E.a,{name:e.deviceId,value:e.label,id:e.deviceId},e.label)}))))),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"10px",marginLeft:"7px"}},l.a.createElement(B.a,{className:r.pos},"Play a test sound"),l.a.createElement(U.a,{style:{marginLeft:"8px"},onClick:function(){var e=new Audio("/gonnadie.wav");console.log(e),e.play()}}),l.a.createElement("audio",{id:"jarjar",src:"./gonnadie.wav"}))),l.a.createElement(R.a,null,l.a.createElement(T.a,{onClick:S,color:"primary"},"Ok"))))}var K={width:"30%",lineHeight:2.5,borderRadius:"4px",border:"1px solid green",padding:"5px",backgroundColor:"#dcf4d1",marginLeft:"10px"},V={backgroundColor:"deepskyblue",lineHeight:2.5,fontSize:"medium",borderRadius:"4px",width:"30%",marginTop:"30px"},z={display:"flex",margin:"10%",marginLeft:"30%",width:"50%",flexDirection:"column",alignItems:"center"},G={width:"100%",display:"flex",margin:"10px",alignItems:"center",flex:1},q={width:"100%",flex:1,display:"flex",alignItems:"flex-end"},Y={},Q={position:"relative",bottom:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",opacity:"1"},X=Object(i.a)(Object(i.a)({},Q),{},{opacity:0,transition:"opacity 1s ease-in-out"});function Z(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),N=Object(o.a)(i,2),T=N[0],D=N[1],R=Object(n.useState)("Fellow Jitser"),P=Object(o.a)(R,2),B=P[0],L=P[1],M=Object(n.useState)(),A=Object(o.a)(M,2),_=A[0],F=A[1],H=Object(n.useState)(!0),U=Object(o.a)(H,2),J=U[0],Z=U[1],$=Object(n.useState)(!0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),le=Object(o.a)(ne,2),ce=le[0],re=le[1],oe=Object(n.useState)(!1),ie=Object(o.a)(oe,2),se=ie[0],me=ie[1],ue=Object(n.useState)(!1),de=Object(o.a)(ue,2),ge=de[0],fe=de[1],Ee=Object(n.useState)(null),ve=Object(o.a)(Ee,2),pe=(ve[0],ve[1],Object(n.useState)(!1)),be=Object(o.a)(pe,2),he=be[0],ye=be[1],Oe=Object(n.useState)("Full Screen"),we=Object(o.a)(Oe,2),xe=we[0],je=we[1],Se=Object(n.useState)({mics:[],cameras:[],speakers:[]}),Ce=Object(o.a)(Se,2),ke=Ce[0],Ie=Ce[1],Ne=l.a.useRef(null),Te=l.a.useRef(he),De={roomName:T,height:"40em",parentNode:"",userInfo:{displayName:B},onload:function(){console.log("After load of iframe"),document.getElementById(e.divId).children[0].style["pointer-events"]="none"},interfaceConfigOverwrite:{TOOLBAR_BUTTONS:[]}};Object(n.useEffect)((function(){if(c&&T&&!_){console.log("************************\n"+document.getElementById(e.divId));var t=window.JitsiMeetExternalAPI;r(!0),De.parentNode=document.getElementById(e.divId),console.log(window.JitsiMeetExternalAPI);var a=new t("meet.jit.si",De);a.addEventListener("screenSharingStatusChanged",(function(e){console.log(e),re(!ce)})),a.executeCommand("toggleFilmStrip"),a.getAvailableDevices().then((function(e){console.log("######################",e);var t={mics:e.audioInput,speakers:e.audioOutput,cameras:e.videoInput};Ie(t)})),F(a)}}),[c,De,e.divId,T,_]),Object(n.useEffect)((function(){ge&&setTimeout((function(){fe(!1)}),3e3)})),Object(n.useEffect)((function(){window.innerHeight!==screen.height&&_&&(document.getElementById(e.divId).children[0].style.height="40em",je("Full Screen"))}),[window.innerHeight!==screen.height]),l.a.useEffect((function(){!0===Te.current&&!1===he&&Ne.current.focus(),Te.current=he}),[he]);var Re=function(){ye((function(e){return!e}))},Pe=function(){var e=document.getElementById("devicesMenu");console.log("&&&&&&&&&&&&&&&&&&&&&&&&",e),Ne.current&&(Ne.current.contains(event.target)||e)?console.log("doin nuthin"):(console.log("Closing the shit"),ye(!1))},Be=function(){"Full Screen"===xe?(document.getElementById("meetingParent").webkitRequestFullscreen(),document.getElementById(e.divId).children[0].style.height="54em",je("Exit Full Screen"),ye(!1)):document.webkitExitFullscreen()};return l.a.createElement("div",null,c?l.a.createElement("div",{id:"meetingParent",style:{position:"relative"}},l.a.createElement("div",{style:Y,id:"meet",onMouseMove:function(e){fe(!0)}}),l.a.createElement("div",{style:ge?Q:X},l.a.createElement("div",{style:{marginLeft:"10px"}},l.a.createElement(s.a,{onClick:function(){_.executeCommand("toggleChat")}},l.a.createElement(v.a,{style:{color:"white"}})),l.a.createElement(s.a,{onClick:function(){_.executeCommand("")}},l.a.createElement(p.a,{style:{color:"white"}}))),l.a.createElement("div",null,l.a.createElement(s.a,{onClick:function(){Z(!J),_.executeCommand("toggleAudio")}},J?l.a.createElement(b.a,{style:{color:"white"}}):l.a.createElement(h.a,{style:{color:"white"}})),l.a.createElement(s.a,{onClick:function(){ae(!te),_.executeCommand("toggleVideo")}},te?l.a.createElement(y.a,{style:{color:"white"}}):l.a.createElement(O.a,{style:{color:"white"}})),l.a.createElement(s.a,{onClick:function(){re(!ce),_.executeCommand("toggleShareScreen")}},ce?l.a.createElement(x.a,{style:{color:"white"}}):l.a.createElement(w.a,{style:{color:"white"}})),l.a.createElement(s.a,{onClick:function(){_.executeCommand("hangup"),_.dispose(),r(!1),F(null)}},l.a.createElement(j.a,{style:{color:"red"}}))),l.a.createElement("div",{style:{marginRight:"10px"}},l.a.createElement(s.a,{onClick:function(){me(!se),_.executeCommand("toggleTileView")}},se?l.a.createElement(S.a,{style:{color:"white"}}):l.a.createElement(C.a,{style:{color:"white"}})),l.a.createElement(s.a,null,l.a.createElement(k.a,{onClick:function(){_.executeCommand("toggleFilmStrip")},style:{color:"white"}})),l.a.createElement(n.Fragment,null,l.a.createElement(s.a,{ref:Ne,"aria-controls":he?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:Re},l.a.createElement(I.a,{style:{color:"white"}})),l.a.createElement(m.a,{open:he,anchorEl:Ne.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return l.a.createElement(u.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),l.a.createElement(d.a,null,l.a.createElement(g.a,{onClickAway:Pe},l.a.createElement(f.a,{autoFocusItem:he,id:"menu-list-grow"},l.a.createElement(E.a,{onClick:Be},xe),l.a.createElement(E.a,{onClick:function(){_.executeCommand("muteEveryone")}},"Mute Everyone"),l.a.createElement(E.a,null,l.a.createElement(W,Object.assign({},ke,{jitsiApi:_})))))))})))))):l.a.createElement("div",{style:{height:"30em"}},l.a.createElement("div",{style:z},l.a.createElement("div",{style:G},l.a.createElement("span",null,"Room Name"),l.a.createElement("input",{style:K,onChange:function(e){D(e.target.value)}})),l.a.createElement("div",{style:G},l.a.createElement("span",null,"User Name \xa0"),l.a.createElement("input",{style:K,onChange:function(e){L(e.target.value)}})),l.a.createElement("div",{style:q},l.a.createElement("button",{style:V,onClick:function(){r(!0)}},"Join Room")))))}var $=a(42),ee=a.n($),te=(a(150),{width:"30%",lineHeight:2.5,borderRadius:"4px",border:"1px solid green",padding:"5px",backgroundColor:"#dcf4d1",marginLeft:"10px"}),ae={backgroundColor:"lightgreen",lineHeight:2.5,fontSize:"medium",borderRadius:"4px",width:"30%",marginTop:"30px"},ne={display:"flex",margin:"10%",marginLeft:"30%",width:"50%",flexDirection:"column",alignItems:"center"},le={width:"100%",display:"flex",margin:"10px",alignItems:"center",flex:1},ce={width:"100%",flex:1,display:"flex",alignItems:"flex-end"},re=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(o.a)(r,2),s=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),g=d[0],f=d[1],E=Object(n.useState)(""),v=Object(o.a)(E,2),p=v[0],b=v[1],h=Object(n.useState)({}),y=Object(o.a)(h,2),O=(y[0],y[1],Object(n.useState)({})),w=Object(o.a)(O,2),x=(w[0],w[1],Object(n.useState)({chatsData:[]})),j=Object(o.a)(x,2),S=j[0],C=j[1];Object(n.useEffect)((function(){if(g){console.log("In effect, without socket!");var e=ee()();e.emit("initialize",{roomName:s}),e.on("otherschatreplies",(function(e){console.log("Trying not to look"),console.log(e.dontlook);k(e.chatsData);C(e)}))}}),[g]);var k=function(e){return e.sort((function(e,t){return e.time-t.time}))},I=function(e){var t=new Date(Number(e));return"".concat(t.getHours(),":").concat(t.getMinutes())};return l.a.createElement("div",{style:{height:"35em"}},g?(console.log("Rerendering chat view..."),console.log(S),console.log(a,s),l.a.createElement("div",null,l.a.createElement("div",{className:"msger"},l.a.createElement("header",{className:"msger-header"},l.a.createElement("div",{className:"msger-header-title"},l.a.createElement("i",{className:"fas fa-comment-alt"})," Sabha Chat Room - ",s),l.a.createElement("div",{className:"msger-header-options"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-cog"},a)))),l.a.createElement("div",{className:"msger-chat"},S.chatsData.map((function(e){return e.user!==a?l.a.createElement("div",{className:"msg left-msg"},l.a.createElement("div",{className:"msg-img",style:{backgroundImage:"url(https://image.flaticon.com/icons/svg/327/327779.svg)"}}),l.a.createElement("div",{className:"msg-bubble"},l.a.createElement("div",{className:"msg-info"},l.a.createElement("div",{className:"msg-info-name"},e.user),l.a.createElement("div",{className:"msg-info-time"},I(e.time))),l.a.createElement("div",{className:"msg-text"},e.message))):l.a.createElement("div",{className:"msg right-msg"},l.a.createElement("div",{className:"msg-img",style:{backgroundImage:"url(https://image.flaticon.com/icons/svg/145/145867.svg)"}}),l.a.createElement("div",{className:"msg-bubble"},l.a.createElement("div",{className:"msg-info"},l.a.createElement("div",{className:"msg-info-name"},e.user),l.a.createElement("div",{className:"msg-info-time"},I(e.time))),l.a.createElement("div",{className:"msg-text"},e.message)))}))),l.a.createElement("form",{className:"msger-inputarea",onSubmit:function(e){e.preventDefault(),ee()().emit("captureChat",{username:a,roomName:s,message:{time:(new Date).getTime(),text:p}}),S.chatsData.push({user:a,message:p,time:(new Date).getTime()}),C(S),b("")}},l.a.createElement("input",{type:"text",value:p,onChange:function(e){b(e.target.value)},className:"msger-input",placeholder:"Enter your message..."}),l.a.createElement("button",{type:"submit",className:"msger-send-btn"},"Send"))))):l.a.createElement("div",{style:ne},l.a.createElement("div",{style:le},l.a.createElement("span",null,"Room Name"),l.a.createElement("input",{style:te,key:"roomname",onChange:function(e){m(e.target.value)}})),l.a.createElement("div",{style:le},l.a.createElement("span",null,"User Name \xa0"),l.a.createElement("input",{style:te,key:"username",onChange:function(e){c(e.target.value)}})),l.a.createElement("div",{style:ce},l.a.createElement("button",{style:ae,onClick:function(){f(!0),ee()().emit("joined",{roomName:s,username:a})}},"Join Chat Room"))))},oe=a(23),ie=a.n(oe),se=a(48),me=ee()(),ue=window,de=ue.RTCPeerConnection,ge=ue.RTCSessionDescription,fe=new de,Ee={display:"flex",justifyContent:"space-around"},ve={display:"flex",flexDirection:"column",alignItems:"center",width:"80%",height:"80%"},pe=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)([]),s=Object(o.a)(i,2),m=s[0],u=s[1];Object(n.useEffect)((function(){var e=document.getElementById("local-video");console.log("Local video: "+e),console.log("Streamed video is: "+c),console.log("Server: "+function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT;return""}()),console.log("Publi URL: "),console.log("Port: "+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT);var t=!1;me.on("update-user-list",(function(e){var t=e.users;d(t)})),me.on("remove-user",(function(e){var t=e.socketId,a=document.getElementById(t);a&&a.remove()})),me.on("call-made",function(){var e=Object(se.a)(ie.a.mark((function e(t){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.setRemoteDescription(new ge(t.offer));case 2:return e.next=4,fe.createAnswer();case 4:return a=e.sent,e.next=7,fe.setLocalDescription(new ge(a));case 7:me.emit("make-answer",{answer:a,to:t.socket});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),me.on("answer-made",function(){var e=Object(se.a)(ie.a.mark((function e(a){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.setRemoteDescription(new ge(a.answer));case 2:t||(g(a.socket),t=!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),navigator.getUserMedia({video:!0,audio:!0},function(){var t=Object(se.a)(ie.a.mark((function t(a){return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&!c&&(e.srcObject=a,console.log(a),a.getTracks().forEach((function(e){fe.addTrack(e,a)})),!c&&r("bla"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){console.warn(e.message)})),fe.ontrack=function(e){var t=document.getElementById("streamed-video");t&&(console.log(e.streams[0]),t.srcObject=e.streams[0])}}),[]),Object(n.useEffect)((function(){"bla"===c&&me.on("listening",(function(e){if(console.log(e),e.id){var t=new window.MediaStream,a=document.getElementById(e.id).srcObject.getTracks();t.addTrack(a[0]),t.addTrack(a[1]),document.getElementById("streamed-video").srcObject=t,r("ad")}}))}),[]);var d=function(e){console.log("Users are: ",e),u(m.concat(e))};function g(e){return f.apply(this,arguments)}function f(){return(f=Object(se.a)(ie.a.mark((function e(t){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.createOffer();case 2:return a=e.sent,e.next=5,fe.setLocalDescription(new ge(a));case 5:me.emit("call-user",{offer:a,to:t});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.a.createElement("div",{style:{height:"35em"}},l.a.createElement("div",{className:"content-container"},l.a.createElement("div",{className:"video-chat-container"},l.a.createElement("div",{className:"video-container",style:Ee},l.a.createElement("div",{style:ve},l.a.createElement("h3",null,"Me"),l.a.createElement("video",{autoPlay:!0,muted:!0,className:"local-video",id:"local-video"})),l.a.createElement("div",{style:ve},l.a.createElement("h3",null,"You"),l.a.createElement("video",{autoPlay:!0,muted:!0,className:"streamed-video",id:"streamed-video"},c))))),l.a.createElement("div",null,l.a.createElement("ul",null,m.map((function(e){return l.a.createElement("li",{onClick:function(){g(e)},key:e},l.a.createElement(T.a,{color:"primary"},"Call - ",e))})))))},be=a(158),he=a(218),ye={display:"flex",alignItems:"center",margin:"100px",marginTop:"100px"},Oe={display:"flex",alignItems:"center",margin:"20px",justifyContent:"flex-end",flexDirection:"row-reverse"},we=function(){var e=window.speechSynthesis,t=e.getVoices(),a="#JSGF V1.0; grammar colors; public <color> = "+["blue","green","black"].join(" | ")+" ;",c=window.webkitSpeechRecognition,r=window.webkitSpeechGrammarList,i=(window.webkitSpeechRecognitionEvent,new c),m=new r;m.addFromString(a,1),i.grammars=m,i.continuous=!1,i.interimResults=!1,i.lang="en-US",i.onspeechend=function(e){console.log("speech ended",e),i.stop(),h(!1)},i.onresult=function(e){console.log("Nuvvu vaagindi:",e),u.current.value=e.results[0][0].transcript},i.onnomatch=function(e){console.log("No Match!",e)},i.onerror=function(e){console.log("Deep shit",e)};var u=Object(n.useRef)(),d=Object(n.useState)(!0),g=Object(o.a)(d,2),f=g[0],E=(g[1],Object(n.useState)(!1)),v=Object(o.a)(E,2),p=v[0],h=v[1];return l.a.createElement("div",null,l.a.createElement("div",{style:f?ye:Oe},l.a.createElement(s.a,{onClick:function(){p||(i.start(),i.onstart=function(e){console.log("Please speak loudly",e)},h(!0))}},l.a.createElement(b.a,null)),l.a.createElement(s.a,{color:"primary"},l.a.createElement(he.a,{style:{margin:"20px"}})),l.a.createElement(be.a,{ref:u,style:{width:"500px"},"aria-label":"minimum height",rowsMin:10,placeholder:"Minimum 3 rows"}),l.a.createElement(s.a,{color:"primary"},l.a.createElement(he.a,{style:{margin:"20px"}})),l.a.createElement(s.a,{onClick:function(){var a=new SpeechSynthesisUtterance(u.current.value);a.voice=t[5],e.speak(a)}},l.a.createElement(b.a,null))))},xe=a(43),je=a(31);a(152);var Se=function(){return l.a.createElement(xe.a,null,l.a.createElement("div",null,l.a.createElement("nav",null,l.a.createElement("div",{className:"navbar"},l.a.createElement("h3",null,"SABHA"),l.a.createElement(xe.b,{to:"/"},"Jitsi"),l.a.createElement(xe.b,{to:"/chat"},"Chat"),l.a.createElement(xe.b,{to:"/meet"},"Meet"),l.a.createElement(xe.b,{to:"/textnspeech"},"Text and Speech"))),l.a.createElement(je.c,null,l.a.createElement(je.a,{path:"/chat"},l.a.createElement(re,null)),l.a.createElement(je.a,{path:"/meet"},l.a.createElement("div",{id:"meet2"}),l.a.createElement(pe,null)),l.a.createElement(je.a,{path:"/textnspeech"},l.a.createElement(we,null)),l.a.createElement(je.a,{path:"/"},l.a.createElement(Z,{divId:"meet"})))))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Se,null)),document.getElementById("rootdiv"))}},[[108,1,2]]]);
//# sourceMappingURL=main.73376111.chunk.js.map